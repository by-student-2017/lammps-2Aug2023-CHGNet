units           metal
atom_style      charge
boundary        p p p

read_data       data_va0.lammps

replicate 1 1 1

variable Tini equal 300.0 # [K]
variable Tfin equal 593.0 # [K], other condition: 873 K, 973 K
variable Nout equal 400

pair_style      m3gnet /mnt/d/lammps/potentials/M3GNET
#pair_style      m3gnet/d3 /mnt/d/lammps/potentials/M3GNET

variable elem string "Ni N C H"

#pair_coeff      * *  MP-2021.2.8-EFS ${elem} # M3GNet <https://github.com/materialsvirtuallab/m3gnet> will be called
pair_coeff      * *  M3GNet-MP-2021.2.8-PES ${elem} # MatGL <https://github.com/materialsvirtuallab/matgl> will be called
#pair_coeff      * *  M3GNet-MP-2021.2.8-DIRECT-PES ${elem} # MatGL <https://github.com/materialsvirtuallab/matgl> will be called

timestep 0.00025 # 0.25 [fs] (Recommend 0.1-0.5 [fs])

thermo ${Nout}
thermo_style custom step time cpu cpuremain lx ly lz press pe temp

velocity all create ${Tini} 12345 mom yes rot no

# Equilibrium system, calculation settings
#fix f1 all nvt temp ${Tini} ${Tfin} $(100*dt)
fix f1 all npt temp ${Tini} ${Tfin} $(100*dt) iso 1.0 1.0 $(1000*dt)

dump            d1 all cfg ${Nout} cfg/run.*.cfg mass type xs ys zs id type vx vy vz fx fy fz q
dump_modify     d1 element ${elem}

run             80000 # 20 [ps]

unfix f1
undump d1

dump            d2 all cfg ${Nout} cfg/run.*.${Tfin}K.cfg mass type xs ys zs id type vx vy vz fx fy fz q
dump_modify     d2 element ${elem}

fix f2 all npt temp ${Tfin} ${Tfin} $(100*dt) iso 1.0 1.0 $(1000*dt)

run             400000 # 0.1 [ns]

